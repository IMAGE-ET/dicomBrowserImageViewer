{% extends 'base.html' %}

{% block content %}


{% if g.currentUser.acctype != 'Tech' %}      
<button onclick="location.href = '/studies/';" id="viewStudies" class="float-left submit-button" >View Studies</button>
<button disabled id="viewImbutton" class="float-left submit-button" >view images</button>
{% endif %}

{% if g.currentUser.acctype != 'Participant' %}
<button onclick="location.href = '/upload/';" id="uploadbutton" class="submit-button" style="float:right;" >Upload Images</button>
{% endif %}

<br><br>
<table class="display" width="100%" cellspacing="0" id="imageTable">  
    <thead>  
        <tr>
            <th width="1%">Preview</th>
            <th>DICOM name</th>
            <th>Study</th>
            <th>Date Uploaded</th>
            <th># DICOMS in set</th>
        </tr>
    </thead>
    <tbody>
        {% for key, value in result.iteritems() %}
        <tr>
            <td align="center">
                {% if g.currentUser.acctype != 'Tech' %}  
                <a href="/viewset/{{ value['id'] }}:{{ key }}">
                {% endif %}
                
                <img style="max-width:150px; max-height: 150px;" src="/upload/{{ value['mid'] }}" /></a>
            </td>
            <td> 
                {% if g.currentUser.acctype != 'Tech' %}  
                <a href="/viewset/{{ value['id'] }}:{{ key }}">
                {% endif %}{{ key }}</a>             
            </td>
            <td> {{ value['study'] }} </td>
            <td> {{ value['timestamp'] }}</td>
            <td align="right"> {{ value['count'] }} </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<script type="text/javascript">
    $("#imageTable").DataTable({oSearch:{sSearch:"{{setname}}"}});
</script>

{% endblock %}
